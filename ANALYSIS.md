# AI看线项目分析报告

## 1. 项目概述

“AI看线”是一个功能全面的A股分析工具，它巧妙地将传统的技术分析方法与前沿的人工智能预测技术相结合。该项目利用Python作为主要开发语言，通过获取和分析股票的K线图、技术指标、财务数据以及相关新闻，为用户提供了一个深入了解股票状况及未来走势的平台。

## 2. 功能特点

该项目具有以下几个核心功能特点：

- **全面的数据获取**：利用 `AKShare` 库，项目能够获取A股市场的历史交易数据、上市公司财务数据以及最新的新闻资讯。
- **深入的技术分析**：项目能够计算多种关键技术指标，包括移动平均线（MA）、平滑异同移动平均线（MACD）、随机指标（KDJ）、相对强弱指数（RSI）以及布林带（Bollinger Bands）等。
- **强大的可视化能力**：项目能够生成专业的静态和交互式图表，包括K线图和各种技术指标图，帮助用户直观地理解市场动态。
- **智能的AI分析**：通过集成Google的Gemini AI模型，项目能够对收集到的数据进行综合分析，并对股票的未来走势做出预测。
- **灵活的访问方式**：项目提供了多种使用方式，包括命令行界面（CLI）、Web界面和MCP服务器，满足不同用户的需求。

## 3. 项目架构

项目采用了模块化的架构，将不同的功能划分到独立的模块中，使得代码结构清晰，易于维护和扩展。

### 3.1. 目录结构

```
AI看线/
├── main.py                 # 主程序入口（命令行）
├── web_app.py              # Web应用入口
├── mcp_server.py           # MCP服务器入口
├── requirements.txt        # 依赖包列表
├── .env.example            # 环境变量示例文件
├── modules/                # 功能模块目录
│   ├── data_fetcher.py     # 数据获取模块
│   ├── technical_analyzer.py # 技术分析模块
│   ├── visualizer.py       # 可视化模块
│   └── ai_analyzer.py      # AI分析模块
├── templates/              # Web模板目录
│   └── index.html          # 主页模板
└── static/                 # 静态资源目录
    ├── css/
    ├── js/
    └── images/
```

### 3.2. 核心模块

- **`data_fetcher.py`**：负责从 `AKShare` 获取所有需要的数据，包括股票的K线数据、财务数据和新闻信息。
- **`technical_analyzer.py`**：负责计算各种技术分析指标，为后续的分析和可视化提供数据支持。
- **`visualizer.py`**：负责将数据和分析结果可视化，生成K线图和技术指标图表。该模块同时使用了 `matplotlib`（用于生成静态图表）和 `pyecharts`（用于生成交互式图表）。
- **`ai_analyzer.py`**：项目的核心亮点，利用AI模型对整合后的数据进行分析，并生成对未来走势的预测。

## 4. 核心流程

项目的核心流程可以概括为以下几个步骤：

1. **数据获取**：根据用户输入的股票代码和分析周期，从 `AKShare` 获取相应的历史K线数据、财务数据和新闻数据。
2. **技术分析**：在获取到数据后，对数据进行处理，计算出多种技术指标。
3. **数据可视化**：将原始数据和计算出的技术指标通过图表的形式展示出来。
4. **AI分析与预测**：将所有数据（包括图表）整合后，交由AI模型进行分析，并生成最终的分析报告和预测结果。

# AI看线项目使用方法

本项目提供了三种使用方式：命令行、Web界面和MCP服务器。

## 1. 准备工作

在开始使用之前，请确保您已经完成了以下准备工作：

### 1.1. 安装依赖

克隆或下载项目到本地后，通过以下命令安装所需的依赖包：

```bash
pip install -r requirements.txt
```

### 1.2. 配置API密钥

为了使用AI分析功能，您需要一个Gemini API密钥。请按照以下步骤操作：

1. 访问 [Google AI Studio](https://ai.google.dev/) 并创建一个API密钥。
2. 在项目根目录下，创建一个名为 `.env` 的文件。
3. 在 `.env` 文件中，添加以下内容，并将 `your_api_key_here` 替换为您的API密钥：

```
XAI_API_KEY=your_api_key_here
```

## 2. 命令行使用

通过命令行，您可以快速地对单个股票进行分析。

### 2.1. 命令格式

```bash
python main.py --stock_code <股票代码> [--period <分析周期>] [--save_path <保存路径>]
```

### 2.2. 参数说明

- `--stock_code`：**必填参数**。A股的股票代码，例如 `000001`。
- `--period`：可选参数。分析的时间周期，可选值为 "1年"、"6个月"、"3个月"、"1个月"。默认为 "1年"。
- `--save_path`：可选参数。分析结果的保存路径。默认为 `./output`。

### 2.3. 示例

```bash
python main.py --stock_code 000001 --period 6个月
```

执行后，分析结果（包括图表和AI分析报告）将保存在 `./output` 目录下。

## 3. Web界面使用

通过Web界面，您可以更直观地与项目进行交互。

### 3.1. 启动Web服务

执行以下命令启动Web服务器：

```bash
python web_app.py
```

### 3.2. 访问和使用

服务启动后，在浏览器中打开 `http://localhost:5000`。

1. 在页面上的输入框中，输入您想分析的股票代码。
2. 选择分析周期。
3. 点击“开始分析”按钮。
4. 等待片刻，分析结果（包括股票基本信息、K线图、技术指标图和AI分析结果）将直接显示在页面上。

## 4. MCP服务器使用

对于需要通过LLM（大型语言模型）进行交互式分析的用户，可以使用MCP服务器。

### 4.1. 启动MCP服务器

执行以下命令启动MCP服务器：

```bash
uvicorn mcp_server:mcp --host 0.0.0.0 --port 8000
```
*注意: readme文件中启动命令 `uv run mcp_server.py` 可能无法正常工作。*

### 4.2. 客户端配置

在您的MCP客户端（例如Cherry-Studio）中，配置streamable-http端点为：

```
http://localhost:8000/mcp
```

配置完成后，您就可以通过LLM与AI看线项目进行交互，随时对股票进行分析。
